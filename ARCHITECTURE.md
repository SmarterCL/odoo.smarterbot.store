# ARCHITECTURE.md - Estructura SmarterOS

## ğŸ—ï¸ Arquitectura General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           SMARTEROS OPERATING SYSTEM            â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   Frontend   â”‚  â”‚   Backend    â”‚           â”‚
â”‚  â”‚              â”‚  â”‚              â”‚           â”‚
â”‚  â”‚ â€¢ app.smarterbot.cl (Next.js)  â”‚           â”‚
â”‚  â”‚ â€¢ smarterbot.store (Shopify)   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Core Services Layer              â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â”‚  â€¢ Odoo (ERP)                           â”‚  â”‚
â”‚  â”‚  â€¢ N8N (Automation)                     â”‚  â”‚
â”‚  â”‚  â€¢ Supabase (Database)                  â”‚  â”‚
â”‚  â”‚  â€¢ Metabase (Analytics)                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Communication Layer              â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â”‚  â€¢ Chatwoot (CRM)                       â”‚  â”‚
â”‚  â”‚  â€¢ Botpress (AI Bots)                   â”‚  â”‚
â”‚  â”‚  â€¢ WhatsApp Business API                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Infrastructure Layer             â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â”‚  â€¢ Hostinger VPS (89.116.23.167)       â”‚  â”‚
â”‚  â”‚  â€¢ Dokploy (Orchestration)             â”‚  â”‚
â”‚  â”‚  â€¢ Traefik (Routing)                   â”‚  â”‚
â”‚  â”‚  â€¢ Cloudflare (DNS/CDN)                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Integration Layer (MCPs)         â”‚  â”‚
â”‚  â”‚                                          â”‚  â”‚
â”‚  â”‚  â€¢ GitHub, Context7, Cloudflare         â”‚  â”‚
â”‚  â”‚  â€¢ Hostinger, Shopify, Supabase, Docker â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”Œ Multi-Tenant Architecture

Cada tenant tiene:
- Subdominio Shopify propio
- Base de datos aislada (RLS)
- Workflows N8N dedicados
- KPIs Metabase propios
- WhatsApp Business propio

## ğŸ”„ Data Flow

1. Cliente â†’ WhatsApp â†’ Chatwoot â†’ Bot IA
2. Pedido â†’ Shopify â†’ N8N â†’ Odoo â†’ FacturaciÃ³n
3. EnvÃ­o â†’ BlueExpress â†’ Tracking â†’ WhatsApp
4. MÃ©tricas â†’ Metabase â†’ Dashboard â†’ Decisiones
